<nav class="navbar">
  <a href="{{ path('app_accueil') }}">Accueil</a>
  <a href="{{ path('app_categorie_index') }}">Cat√©gories</a>
  <a href="{{ path('app_livre_index') }}">Livres</a>

  {% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('app_editeur_index') }}">√âditeurs</a>
    <a href="{{ path('app_auteur_index') }}">Auteurs</a>
  {% endif %}

  <a href="{{ path('app_contact') }}">Contact</a>
  <a href="{{ path('app_about') }}">√Ä propos</a>
    <!-- üîç BARRE DE RECHERCHE GLOBALE -->
    <form action="{{ path('app_search') }}" method="get" class="search-form">
        <input type="text" name="q" placeholder="Rechercher un livre..." required>
        <button type="submit"><i class="fas fa-search"></i></button>
    </form>

  {% if app.user %}
    <div class="user-dropdown">
      <button class="user-btn">
        <i class="fas fa-user-circle"></i>
        {{ app.user.prenom ?? app.user.nom }}
        <i class="fas fa-chevron-down"></i>
      </button>

      <div class="dropdown-menu">
        <a href="{{ path('app_panier') }}">
          <i class="fas fa-shopping-cart"></i> Panier

          {% if app.session.get('panier') is not empty %}
            <span class="badge">{{ app.session.get('panier')|length }}</span>
          {% endif %}
        </a>

        <a href="{{ path('app_commandes') }}">
          <i class="fas fa-box"></i> Mes commandes
        </a>

        <a href="{{ path('my_emprunts') }}">
          <i class="fas fa-book"></i> Mes emprunts
        </a>

        <a href="{{ path('app_profile') }}">
          <i class="fas fa-user-cog"></i> Mon profil
        </a>

        <a href="{{ path('app_logout') }}" class="logout">
          <i class="fas fa-sign-out-alt"></i> D√©connexion
        </a>
      </div>
    </div>
  {% else %}
    <a href="{{ path('app_login') }}" class="btn-login">Connexion</a>
  {% endif %}
</nav>


<script>
// Gestion du menu d√©roulant sur mobile
const userDropdown = document.querySelector('.user-dropdown');
if (userDropdown) {
  const userBtn = userDropdown.querySelector('.user-btn');
  
  userBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    userDropdown.classList.toggle('open');
  });
  
  // Fermer le menu en cliquant √† l'ext√©rieur
  document.addEventListener('click', (e) => {
    if (!userDropdown.contains(e.target)) {
      userDropdown.classList.remove('open');
    }
  });
}
</script>
