{% extends 'base.html.twig' %}

{% block title %}Détail du Livre - {{ livre.titre }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/livre.css') }}">
    <link rel="stylesheet" href="{{ asset('css/navbar.css') }}">

{% endblock %}

{% block body %}
<div class="container py-5 book-page">

    <div class="row g-5 align-items-start">

        <!-- Image du livre -->
        <div class="col-lg-5">
            <div class="book-cover-wrapper shadow-soft">
                <img src="{{ asset('uploads/livres/' ~ livre.image) }}"
                     alt="{{ livre.titre }}"
                     class="book-cover-img">
            </div>
        </div>

        <!-- Infos -->
        <div class="col-lg-7">

            <h1 class="book-title">{{ livre.titre }}</h1>

            <div class="meta-section">
                <p class="meta-line">
                    <i class="fas fa-user-edit"></i>
                    <strong>Auteur(s) :</strong>
                    {% for auteur in livre.auteurs %}
                        <span class="meta-value">{{ auteur.prenom }} {{ auteur.nom }}</span>
                        {% if not loop.last %}, {% endif %}
                    {% endfor %}
                </p>
            </div>

            <div class="row mt-4 g-3">

                <div class="col-md-6">
                    <div class="info-card">
                        <p class="label"><i class="fas fa-building"></i> Éditeur</p>
                        <p class="value">{{ livre.editeur.getNom() }}</p>
                    </div>

                    <div class="info-card">
                        <p class="label"><i class="fas fa-barcode"></i> ISBN</p>
                        <p class="value">{{ livre.isbn }}</p>
                    </div>

                    <div class="info-card">
                        <p class="label"><i class="far fa-calendar-alt"></i> Publié le</p>
                        <p class="value">{{ livre.datepub|date('d/m/Y') }}</p>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="info-card highlight">
                        <p class="label"><i class="fas fa-boxes"></i> Disponibilité</p>
                        <p class="value">
                            {% if livre.qte > 0 %}
                                <span class="available-dot"></span>
                                {{ livre.qte }} exemplaire(s)
                            {% else %}
                                <span class="not-available">Rupture de stock</span>
                            {% endif %}
                        </p>
                    </div>

                    <div class="info-card price-card">
                        <p class="label"><i class="fas fa-coins"></i> Prix</p>
                        <p class="value price">{{ livre.prixunitaire }} DT</p>
                    </div>
                </div>
            </div>

            <!-- Résumé -->
            {% if livre.description %}
            <div class="resume-card shadow-soft">
                <h5><i class="fas fa-align-left"></i> Résumé</h5>
                <p>{{ livre.description }}</p>
            </div>
            {% endif %}

            <div class="action-buttons mt-4">
                <a href="{{ path('app_livre_index') }}" class="btn btn-back">
                    <i class="fas fa-arrow-left"></i> Retour
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}

